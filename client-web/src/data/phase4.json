{
  "groupId": "phase-4",
  "groupLabel": "4단계: 구글 서버 내부 처리 (DB/검색 로직)",
  "mapDescription": "거대한 구글의 내부 왕국... 이곳에는 방대한 DB와 검색 로직들이 얽혀 있는 거대한 미궁이...",
  "steps": [
    {
      "id": 0,
      "label": "내부 라우팅",
      "desc": "구글 프런트엔드(GFE)가 검색 백엔드나 마이크로서비스로 요청을 넘깁니다."
    },
    {
      "id": 1,
      "label": "서비스 엔드포인트 호출",
      "desc": "검색 기능을 담당하는 서비스(모놀리식 또는 마이크로서비스)가 요청을 받습니다."
    },
    {
      "id": 2,
      "label": "쿼리 분석",
      "desc": "예: 'q=flowers' 등 사용자 검색어를 파싱합니다."
    },
    {
      "id": 3,
      "label": "로그 기록",
      "desc": "분석, 통계용으로 빅테이블/스패너 등에 요청 정보를 기록합니다."
    },
    {
      "id": 4,
      "label": "검색 알고리즘 시작",
      "desc": "랭킹 로직 혹은 색인 시스템 호출 등 본격 검색이 시작됩니다."
    },
    {
      "id": 5,
      "label": "단어 토큰화",
      "desc": "검색어 'flowers'를 형태소 분석하거나 언어별 토큰으로 분리합니다."
    },
    {
      "id": 6,
      "label": "맞춤법 검사",
      "desc": "오타가 있는지, 'flower' 등으로 교정해야 할지 판단합니다."
    },
    {
      "id": 7,
      "label": "사용자 프로필 조회(선택)",
      "desc": "로그인된 사용자라면 개인화 정보를 일부 참조할 수 있습니다."
    },
    {
      "id": 8,
      "label": "인덱스 분산 조회",
      "desc": "전 세계 여러 데이터센터의 색인 샤드를 동시에 탐색합니다."
    },
    {
      "id": 9,
      "label": "랭킹 신호 결합",
      "desc": "링크 구조나 사용자 클릭 이력 등을 종합해 문서 점수를 계산합니다."
    },
    {
      "id": 10,
      "label": "부분 결과 집계",
      "desc": "샤드별로 모인 결과를 하나로 합칩니다."
    },
    {
      "id": 11,
      "label": "광고(Ads) 조회",
      "desc": "광고 시스템에 'flowers' 연관 광고를 요청하고 경매(입찰)를 진행합니다."
    },
    {
      "id": 12,
      "label": "안전검색 여부",
      "desc": "성인/유해 콘텐츠 필터링(SafeSearch)을 적용할지 결정합니다."
    },
    {
      "id": 13,
      "label": "지역/언어 반영",
      "desc": "사용자의 추정 위치나 언어 설정에 따라 결과를 조정합니다."
    },
    {
      "id": 14,
      "label": "오타 교정 안내",
      "desc": "'이 단어를 찾으셨나요?' 같은 스펠링 교정 제안을 준비합니다."
    },
    {
      "id": 15,
      "label": "DB/빅테이블 조회",
      "desc": "동의어, 관련 검색어 등 추가 데이터를 위해 DB를 조회할 수 있습니다."
    },
    {
      "id": 16,
      "label": "캐시 조회",
      "desc": "이전에 유사 질의가 있었다면 캐시된 결과를 빠르게 반환할 수도 있습니다."
    },
    {
      "id": 17,
      "label": "머신러닝 랭킹 모델",
      "desc": "기계학습 모델이 각 문서의 최종 점수를 산출합니다."
    },
    {
      "id": 18,
      "label": "상위 결과 추출",
      "desc": "가장 높은 점수를 받은 상위 N개의 페이지를 골라냅니다."
    },
    {
      "id": 19,
      "label": "광고 경매",
      "desc": "'flowers' 키워드에 광고주들이 입찰, 높은 순위 광고 결정."
    },
    {
      "id": 20,
      "label": "광고 블록 구성",
      "desc": "선정된 광고를 짧은 텍스트, 링크, 주의 문구 등으로 묶습니다."
    },
    {
      "id": 21,
      "label": "통합 검색(이미지/영상)",
      "desc": "이미지, 동영상, 뉴스 등 통합하여 함께 보여줄지 결정."
    },
    {
      "id": 22,
      "label": "검색결과 페이지(SERP) 작성",
      "desc": "일반 검색결과 + 광고 + 기타 섹션을 합쳐 최종 결과 구조를 만듭니다."
    },
    {
      "id": 23,
      "label": "관련 검색어",
      "desc": "'함께 많이 찾는 검색어' 등을 추가로 담을 수 있습니다."
    },
    {
      "id": 24,
      "label": "초 단위 처리",
      "desc": "구글은 보통 1초 이내로 대부분 처리합니다."
    },
    {
      "id": 25,
      "label": "HTML 템플릿 생성",
      "desc": "결과를 넣을 템플릿을 불러와서 사용자에게 보낼 HTML을 합칩니다."
    },
    {
      "id": 26,
      "label": "분석 스크립트 추가",
      "desc": "사용자 행동 추적용 JS 코드를 HTML에 삽입할 수 있습니다."
    },
    {
      "id": 27,
      "label": "CSS/JS 링크 삽입",
      "desc": "구글의 스타일, JS 등을 불러올 링크를 HTML에 배치합니다."
    },
    {
      "id": 28,
      "label": "개인화 배너",
      "desc": "로그인 상태라면 개인화된 환영 메시지나 추천요소를 넣을 수도 있습니다."
    },
    {
      "id": 29,
      "label": "최종 HTML 조립",
      "desc": "서버가 모든 텍스트, 이미지 링크 등을 합쳐 완성된 HTML 본문을 준비합니다."
    },
    {
      "id": 30,
      "label": "헤더 정보 설정",
      "desc": "Cache-Control 등 캐시 정책이나 기타 HTTP 헤더를 결정합니다."
    },
    {
      "id": 31,
      "label": "HTTP 압축 여부",
      "desc": "브라우저가 gzip/brotli를 지원하면 압축해 전송할 수도 있습니다."
    },
    {
      "id": 32,
      "label": "ETag/요청 ID 생성",
      "desc": "디버깅용 ETag나 X-Request-ID 등을 헤더에 넣을 수 있습니다."
    },
    {
      "id": 33,
      "label": "서버 로그 기록",
      "desc": "결과 개수, 처리 시간 등 서버 측에 추가 정보로 기록합니다."
    },
    {
      "id": 34,
      "label": "부분 데이터 전송(스트리밍)",
      "desc": "HTTP/2나 청크로 일부 HTML을 미리 보내며 나머지를 계속 생성할 수도 있습니다."
    },
    {
      "id": 35,
      "label": "엣지 캐싱/CDN",
      "desc": "반복 쿼리에 대비해 구글 엣지 서버나 CDN에 결과가 캐싱될 가능성."
    },
    {
      "id": 36,
      "label": "과도 트래픽 여부 검사",
      "desc": "DDoS 방어 등을 위해 유해 트래픽이 아닌지 다시 한 번 점검."
    },
    {
      "id": 37,
      "label": "200 OK 준비",
      "desc": "서버는 최종적으로 200 성공 코드를 설정합니다."
    },
    {
      "id": 38,
      "label": "브라우저로 전송 직전",
      "desc": "HTML 결과를 전송하기 직전입니다."
    },
    {
      "id": 39,
      "label": "단계 4 종료",
      "desc": "서버 쪽 검색 로직이 끝나고, 이제 응답을 브라우저로 보냅니다."
    }
  ]
}
